<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Aether Weather</title>
<link href="https://fonts.googleapis.com/css2?family=Unbounded:wght@200;300;400;600;700;900&family=DM+Sans:ital,wght@0,200;0,300;0,400;0,500;1,300&display=swap" rel="stylesheet"/>
<style>
/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   RESET & ROOT
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
:root{
  --teal:#00e5c8;
  --violet:#9b6dff;
  --emerald:#00c97a;
  --amber:#ffb347;
  --glass:rgba(255,255,255,0.045);
  --glass-hover:rgba(255,255,255,0.08);
  --border:rgba(255,255,255,0.09);
  --border-bright:rgba(255,255,255,0.18);
  --text:#f0f8ff;
  --text-2:rgba(200,230,255,0.65);
  --text-3:rgba(160,210,230,0.42);
  --blur:blur(32px);
  --shadow:0 32px 80px rgba(0,0,0,0.6);
}
html{scroll-behavior:smooth}
body{
  font-family:'DM Sans',sans-serif;
  min-height:100vh;
  background:#020810;
  color:var(--text);
  overflow-x:hidden;
  cursor:default;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   BACKGROUND SYSTEM
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.bg-canvas{
  position:fixed;inset:0;z-index:0;
  background:
    radial-gradient(ellipse 80% 60% at 10% 20%, rgba(0,229,200,0.08) 0%, transparent 60%),
    radial-gradient(ellipse 60% 80% at 90% 80%, rgba(155,109,255,0.1) 0%, transparent 60%),
    radial-gradient(ellipse 50% 50% at 50% 50%, rgba(0,201,122,0.05) 0%, transparent 70%),
    linear-gradient(160deg, #020b12 0%, #020810 40%, #060312 100%);
}
.aurora{
  position:fixed;inset:0;z-index:0;pointer-events:none;
  background:
    conic-gradient(from 0deg at 20% 30%, transparent 0deg, rgba(0,229,200,0.04) 60deg, transparent 120deg),
    conic-gradient(from 180deg at 80% 70%, transparent 0deg, rgba(155,109,255,0.05) 60deg, transparent 120deg);
  animation:auroraShift 18s ease-in-out infinite alternate;
}
@keyframes auroraShift{
  0%{opacity:.6;transform:scale(1) rotate(0deg)}
  100%{opacity:1;transform:scale(1.1) rotate(3deg)}
}

/* Floating orbs */
.orb{position:fixed;border-radius:50%;filter:blur(80px);pointer-events:none;z-index:0;mix-blend-mode:screen}
.orb-1{width:500px;height:500px;background:radial-gradient(rgba(0,229,200,0.15),transparent 70%);top:-100px;left:-100px;animation:orbDrift1 22s ease-in-out infinite}
.orb-2{width:600px;height:600px;background:radial-gradient(rgba(155,109,255,0.12),transparent 70%);bottom:-150px;right:-100px;animation:orbDrift2 26s ease-in-out infinite}
.orb-3{width:300px;height:300px;background:radial-gradient(rgba(0,201,122,0.1),transparent 70%);top:40%;left:60%;animation:orbDrift3 16s ease-in-out infinite}
.orb-4{width:200px;height:200px;background:radial-gradient(rgba(255,179,71,0.08),transparent 70%);top:20%;right:20%;animation:orbDrift1 20s ease-in-out infinite reverse}

@keyframes orbDrift1{0%,100%{transform:translate(0,0) scale(1)}33%{transform:translate(40px,-30px) scale(1.1)}66%{transform:translate(-20px,50px) scale(0.95)}}
@keyframes orbDrift2{0%,100%{transform:translate(0,0)}50%{transform:translate(-60px,-40px) scale(1.08)}}
@keyframes orbDrift3{0%,100%{transform:translate(-50%,-50%) scale(1)}50%{transform:translate(-50%,-50%) scale(1.3) rotate(20deg)}}

/* Grid texture overlay */
.grid-texture{
  position:fixed;inset:0;z-index:0;pointer-events:none;opacity:.025;
  background-image:linear-gradient(rgba(0,229,200,1) 1px,transparent 1px),linear-gradient(90deg,rgba(0,229,200,1) 1px,transparent 1px);
  background-size:60px 60px;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   ANIMATIONS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
@keyframes fadeUp{from{opacity:0;transform:translateY(24px)}to{opacity:1;transform:translateY(0)}}
@keyframes fadeIn{from{opacity:0}to{opacity:1}}
@keyframes pulse{0%,100%{opacity:1;transform:scale(1)}50%{opacity:.4;transform:scale(1.3)}}
@keyframes spin{to{transform:rotate(360deg)}}
@keyframes shimmerText{0%{background-position:-200% center}100%{background-position:200% center}}
@keyframes float{0%,100%{transform:translateY(0)}50%{transform:translateY(-8px)}}
@keyframes borderGlow{0%,100%{border-color:rgba(0,229,200,0.2)}50%{border-color:rgba(0,229,200,0.5)}}
@keyframes scanline{0%{transform:translateY(-100%)}100%{transform:translateY(100vh)}}
@keyframes countUp{from{opacity:0;transform:scale(.8) translateY(10px)}to{opacity:1;transform:scale(1) translateY(0)}}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   LAYOUT
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.page{position:relative;z-index:1;min-height:100vh;padding:0 0 80px}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   HEADER â€” Asymmetric split layout
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.header{
  position:relative;
  padding:48px 48px 0;
  display:flex;
  align-items:flex-start;
  justify-content:space-between;
  gap:24px;
  flex-wrap:wrap;
  animation:fadeUp .8s ease forwards;
}
.brand{display:flex;flex-direction:column;gap:6px}
.brand-mark{
  font-family:'Unbounded',sans-serif;
  font-size:clamp(22px,4vw,42px);
  font-weight:700;
  letter-spacing:-1px;
  line-height:1;
  background:linear-gradient(135deg,#fff 0%,var(--teal) 40%,#fff 70%,var(--violet) 100%);
  background-size:200% auto;
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
  animation:shimmerText 6s linear infinite;
}
.brand-sub{
  font-size:11px;
  letter-spacing:4px;
  text-transform:uppercase;
  color:var(--text-3);
  font-weight:300;
  padding-left:2px;
}

/* Pill tabs in header */
.nav-tabs{
  display:flex;
  gap:8px;
  background:var(--glass);
  border:1px solid var(--border);
  border-radius:50px;
  padding:6px;
  backdrop-filter:var(--blur);
  -webkit-backdrop-filter:var(--blur);
  box-shadow:var(--shadow);
  align-self:center;
}
.nav-tab{
  display:flex;align-items:center;gap:8px;
  padding:10px 22px;
  border-radius:50px;
  border:none;
  background:transparent;
  color:var(--text-2);
  font-family:'DM Sans',sans-serif;
  font-size:13px;font-weight:500;
  cursor:pointer;
  transition:all .3s ease;
  white-space:nowrap;
}
.nav-tab:hover{background:rgba(255,255,255,.06);color:var(--text)}
.nav-tab.on{
  background:linear-gradient(135deg,rgba(0,229,200,.2),rgba(155,109,255,.15));
  border:1px solid rgba(0,229,200,.3);
  color:#fff;
  box-shadow:0 0 20px rgba(0,229,200,.15),inset 0 1px 0 rgba(255,255,255,.1);
}
.nav-tab .t-icon{font-size:15px}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   SEARCH â€” Floating pill
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.search-wrap{
  padding:32px 48px 0;
  animation:fadeUp .9s ease forwards;
  animation-delay:.1s;
  opacity:0;
}
.search-pill{
  display:flex;align-items:center;gap:12px;
  background:var(--glass);
  backdrop-filter:var(--blur);-webkit-backdrop-filter:var(--blur);
  border:1px solid var(--border-bright);
  border-radius:60px;
  padding:8px 8px 8px 24px;
  box-shadow:0 16px 60px rgba(0,0,0,.5),inset 0 1px 0 rgba(255,255,255,.07),0 0 0 1px rgba(0,229,200,.05);
  transition:border-color .3s,box-shadow .3s;
}
.search-pill:focus-within{
  border-color:rgba(0,229,200,.4);
  box-shadow:0 16px 60px rgba(0,0,0,.5),inset 0 1px 0 rgba(255,255,255,.07),0 0 30px rgba(0,229,200,.1);
}
.s-icon{font-size:18px;flex-shrink:0;opacity:.7}
.s-input{
  flex:1;background:none;border:none;outline:none;
  color:var(--text);font-size:15px;font-family:'DM Sans',sans-serif;font-weight:400;
  min-width:120px;
}
.s-input::placeholder{color:var(--text-3)}
.date-pill{
  background:rgba(255,255,255,.06);
  border:1px solid var(--border);
  border-radius:30px;color:var(--text-2);
  padding:8px 14px;font-size:13px;
  font-family:'DM Sans',sans-serif;
  outline:none;color-scheme:dark;cursor:pointer;
  display:none;
  transition:border-color .3s;
}
.date-pill:focus{border-color:rgba(0,229,200,.4)}
.geo-pill{
  display:flex;align-items:center;gap:7px;
  background:rgba(255,255,255,.06);
  border:1px solid var(--border);
  border-radius:30px;color:var(--text-2);
  padding:10px 18px;font-size:13px;
  font-family:'DM Sans',sans-serif;font-weight:500;
  cursor:pointer;transition:all .3s ease;white-space:nowrap;flex-shrink:0;
}
.geo-pill:hover{background:rgba(0,229,200,.12);border-color:rgba(0,229,200,.35);color:var(--teal)}
.geo-pill:disabled{opacity:.4;cursor:not-allowed}
.geo-pill.spinning .geo-i{animation:spin .8s linear infinite}
.geo-i{font-size:15px;display:inline-block}
.search-btn{
  flex-shrink:0;
  background:linear-gradient(135deg,var(--teal),rgba(0,180,200,.8));
  border:none;border-radius:50px;
  color:#001a18;
  padding:12px 32px;
  font-size:14px;font-family:'DM Sans',sans-serif;font-weight:600;
  cursor:pointer;letter-spacing:.3px;
  transition:all .3s ease;
  box-shadow:0 4px 20px rgba(0,229,200,.3);
}
.search-btn:hover{transform:scale(1.04);box-shadow:0 6px 28px rgba(0,229,200,.45)}
.search-btn:active{transform:scale(.98)}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   MAIN CONTENT AREA
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.content{padding:32px 48px 0}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   CURRENT WEATHER â€” Hero layout
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.weather-hero{
  display:grid;
  grid-template-columns:1fr 420px;
  gap:20px;
  animation:fadeUp .5s ease forwards;
}

/* Left panel â€” big temp */
.hero-left{
  background:var(--glass);
  backdrop-filter:var(--blur);-webkit-backdrop-filter:var(--blur);
  border:1px solid var(--border);
  border-radius:28px;
  padding:36px 40px;
  box-shadow:var(--shadow),inset 0 1px 0 rgba(255,255,255,.06);
  position:relative;overflow:hidden;
}
.hero-left::before{
  content:'';position:absolute;top:0;left:0;right:0;height:1px;
  background:linear-gradient(90deg,transparent,rgba(0,229,200,.4),rgba(155,109,255,.3),transparent);
}
.hero-left::after{
  content:'';position:absolute;
  width:300px;height:300px;border-radius:50%;
  background:radial-gradient(rgba(0,229,200,.06),transparent 70%);
  top:-80px;right:-80px;pointer-events:none;
}
.loc-live{display:flex;align-items:center;gap:12px;margin-bottom:24px}
.live-chip{
  display:inline-flex;align-items:center;gap:6px;
  background:rgba(0,229,200,.1);
  border:1px solid rgba(0,229,200,.25);
  border-radius:20px;padding:4px 12px;
  font-size:11px;letter-spacing:2px;text-transform:uppercase;
  color:var(--teal);font-weight:500;
}
.live-dot{width:5px;height:5px;border-radius:50%;background:var(--teal);animation:pulse .8s ease-in-out infinite}
.loc-text{font-size:13px;color:var(--text-2);font-weight:300}

.city-name{
  font-family:'Unbounded',sans-serif;
  font-size:clamp(20px,3vw,32px);
  font-weight:600;
  line-height:1.1;
  margin-bottom:4px;
}
.loc-meta{font-size:12px;color:var(--text-3);margin-bottom:32px;letter-spacing:.5px}

.temp-display{
  display:flex;align-items:flex-start;gap:0;
  margin-bottom:8px;
  animation:countUp .6s cubic-bezier(.34,1.56,.64,1) forwards;
}
.temp-value{
  font-family:'Unbounded',sans-serif;
  font-size:clamp(80px,12vw,140px);
  font-weight:200;
  line-height:.9;
  color:#fff;
  letter-spacing:-6px;
  text-shadow:0 0 80px rgba(0,229,200,.3);
}
.temp-unit{
  font-family:'Unbounded',sans-serif;
  font-size:clamp(20px,3vw,36px);
  font-weight:300;
  color:var(--teal);
  margin-top:16px;
  margin-left:4px;
}
.weather-desc-row{
  display:flex;align-items:center;gap:16px;margin-bottom:32px;
}
.weather-icon-big{font-size:48px;filter:drop-shadow(0 0 20px rgba(255,255,255,.3));animation:float 4s ease-in-out infinite}
.weather-desc{
  display:flex;flex-direction:column;gap:4px;
}
.desc-main{font-size:20px;font-weight:500;color:#fff}
.desc-feels{font-size:13px;color:var(--text-2);font-weight:300}

/* Stat strip */
.stat-strip{
  display:flex;gap:0;
  border:1px solid var(--border);
  border-radius:18px;overflow:hidden;
  background:rgba(0,0,0,.2);
}
.strip-item{
  flex:1;padding:16px 14px;
  border-right:1px solid var(--border);
  transition:background .3s;
  cursor:default;
  text-align:center;
}
.strip-item:last-child{border-right:none}
.strip-item:hover{background:rgba(255,255,255,.04)}
.strip-label{font-size:9px;letter-spacing:2px;text-transform:uppercase;color:var(--text-3);margin-bottom:6px;font-weight:500}
.strip-val{font-size:15px;font-weight:600;color:var(--text);font-family:'DM Sans',sans-serif}
.strip-icon{font-size:16px;margin-bottom:4px}

/* Right panel â€” detail cards stacked */
.hero-right{display:flex;flex-direction:column;gap:16px}

.detail-card{
  background:var(--glass);
  backdrop-filter:var(--blur);-webkit-backdrop-filter:var(--blur);
  border:1px solid var(--border);
  border-radius:22px;
  padding:22px 24px;
  box-shadow:var(--shadow),inset 0 1px 0 rgba(255,255,255,.05);
  position:relative;overflow:hidden;
  transition:border-color .3s,transform .3s;
}
.detail-card:hover{border-color:rgba(255,255,255,.14);transform:translateY(-2px)}
.detail-card::before{
  content:'';position:absolute;top:0;left:0;right:0;height:1px;
  background:linear-gradient(90deg,transparent,rgba(255,255,255,.1),transparent);
}
.dc-title{
  font-size:10px;letter-spacing:3px;text-transform:uppercase;
  color:var(--text-3);margin-bottom:16px;font-weight:500;
}
.dc-grid{display:grid;grid-template-columns:1fr 1fr;gap:14px}
.dc-item{display:flex;flex-direction:column;gap:4px}
.dc-icon{font-size:18px;margin-bottom:2px}
.dc-lbl{font-size:10px;color:var(--text-3);text-transform:uppercase;letter-spacing:1.5px}
.dc-val{font-size:15px;font-weight:600;color:var(--text)}

/* Teal accent card */
.detail-card.accent-teal{border-color:rgba(0,229,200,.15)}
.detail-card.accent-teal::after{
  content:'';position:absolute;
  width:120px;height:120px;border-radius:50%;
  background:radial-gradient(rgba(0,229,200,.08),transparent 70%);
  bottom:-30px;right:-20px;pointer-events:none;
}
.detail-card.accent-violet{border-color:rgba(155,109,255,.15)}
.detail-card.accent-violet::after{
  content:'';position:absolute;
  width:120px;height:120px;border-radius:50%;
  background:radial-gradient(rgba(155,109,255,.08),transparent 70%);
  bottom:-30px;right:-20px;pointer-events:none;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   HOURLY STRIP
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.hourly-section{margin-top:20px;animation:fadeUp .6s ease forwards;animation-delay:.2s;opacity:0}
.section-label{
  font-size:11px;letter-spacing:3px;text-transform:uppercase;
  color:var(--text-3);margin-bottom:14px;font-weight:500;
  display:flex;align-items:center;gap:10px;
}
.section-label::after{content:'';flex:1;height:1px;background:var(--border)}

.hourly-track{
  display:flex;gap:10px;overflow-x:auto;padding-bottom:8px;
  scrollbar-width:none;
}
.hourly-track::-webkit-scrollbar{display:none}
.h-card{
  flex-shrink:0;min-width:76px;
  background:var(--glass);
  backdrop-filter:blur(20px);-webkit-backdrop-filter:blur(20px);
  border:1px solid var(--border);border-radius:18px;
  padding:14px 10px;
  display:flex;flex-direction:column;align-items:center;gap:6px;
  transition:all .3s ease;cursor:default;
  position:relative;overflow:hidden;
}
.h-card:hover{background:var(--glass-hover);border-color:rgba(0,229,200,.25);transform:translateY(-4px);box-shadow:0 12px 32px rgba(0,0,0,.4)}
.h-card.now{border-color:rgba(0,229,200,.35);background:rgba(0,229,200,.07)}
.h-card.now::before{
  content:'';position:absolute;top:0;left:0;right:0;height:2px;
  background:linear-gradient(90deg,transparent,var(--teal),transparent);
}
.h-time{font-size:10px;color:var(--text-3);font-weight:500;letter-spacing:.5px}
.h-icon{font-size:24px}
.h-temp{font-size:16px;font-weight:700;font-family:'DM Sans',sans-serif}
.h-rain{font-size:10px;color:rgba(100,180,255,.7)}
.h-wind{font-size:10px;color:var(--text-3)}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   AIR QUALITY PANEL
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.aq-panel{
  margin-top:20px;
  background:var(--glass);
  backdrop-filter:var(--blur);-webkit-backdrop-filter:var(--blur);
  border:1px solid rgba(0,201,122,.15);
  border-radius:24px;padding:28px 32px;
  box-shadow:var(--shadow),inset 0 1px 0 rgba(255,255,255,.04);
  animation:fadeUp .6s ease forwards;animation-delay:.3s;opacity:0;
  position:relative;overflow:hidden;
}
.aq-panel::before{
  content:'';position:absolute;top:0;left:0;right:0;height:1px;
  background:linear-gradient(90deg,transparent,rgba(0,201,122,.4),transparent);
}
.aq-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(110px,1fr));gap:14px;margin-top:16px}
.aq-item{
  background:rgba(0,201,122,.05);border:1px solid rgba(0,201,122,.1);
  border-radius:14px;padding:14px;
  transition:all .3s ease;cursor:default;
}
.aq-item:hover{background:rgba(0,201,122,.1);transform:translateY(-3px)}
.aq-icon{font-size:18px;margin-bottom:6px}
.aq-lbl{font-size:9px;color:var(--text-3);text-transform:uppercase;letter-spacing:1.5px;margin-bottom:4px}
.aq-val{font-size:15px;font-weight:600;color:var(--emerald)}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   HISTORICAL VIEW
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.hist-hero{animation:fadeUp .5s ease forwards}
.hist-top{
  display:grid;grid-template-columns:1fr 1fr 1fr;gap:16px;margin-bottom:20px;
}
.hist-big-card{
  background:var(--glass);backdrop-filter:var(--blur);-webkit-backdrop-filter:var(--blur);
  border:1px solid var(--border);border-radius:24px;
  padding:28px;box-shadow:var(--shadow),inset 0 1px 0 rgba(255,255,255,.05);
  text-align:center;position:relative;overflow:hidden;
  transition:all .3s ease;
}
.hist-big-card:hover{transform:translateY(-4px);border-color:rgba(255,255,255,.14)}
.hist-big-card.highlight{border-color:rgba(0,229,200,.2)}
.hist-big-card.highlight::before{
  content:'';position:absolute;top:0;left:0;right:0;height:2px;
  background:linear-gradient(90deg,transparent,var(--teal),transparent);
}
.hist-temp-val{
  font-family:'Unbounded',sans-serif;
  font-size:52px;font-weight:200;
  color:#fff;line-height:1;letter-spacing:-3px;
  margin:12px 0 4px;
}
.hist-temp-label{font-size:11px;color:var(--text-3);text-transform:uppercase;letter-spacing:2px}
.hist-icon{font-size:32px;margin-bottom:8px}

.hist-stats-row{
  display:grid;grid-template-columns:repeat(auto-fill,minmax(140px,1fr));gap:14px;margin-bottom:20px;
}
.hist-stat{
  background:var(--glass);backdrop-filter:var(--blur);
  border:1px solid var(--border);border-radius:18px;
  padding:18px 20px;
  transition:all .3s ease;cursor:default;
}
.hist-stat:hover{background:var(--glass-hover);transform:translateY(-3px)}
.hs-icon{font-size:20px;margin-bottom:8px}
.hs-lbl{font-size:10px;color:var(--text-3);text-transform:uppercase;letter-spacing:1.5px;margin-bottom:5px}
.hs-val{font-size:18px;font-weight:600;color:var(--text)}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   MARINE VIEW
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.marine-hero{animation:fadeUp .5s ease forwards}
.wave-display{
  background:var(--glass);backdrop-filter:var(--blur);-webkit-backdrop-filter:var(--blur);
  border:1px solid rgba(0,130,200,.2);border-radius:28px;
  padding:36px 40px;box-shadow:var(--shadow),inset 0 1px 0 rgba(255,255,255,.05);
  margin-bottom:20px;position:relative;overflow:hidden;
}
.wave-display::before{
  content:'';position:absolute;top:0;left:0;right:0;height:2px;
  background:linear-gradient(90deg,transparent,rgba(0,150,255,.5),rgba(0,229,200,.3),transparent);
}
.wave-bg{
  position:absolute;bottom:0;left:0;right:0;height:60%;
  background:linear-gradient(0deg,rgba(0,80,180,.08),transparent);
  pointer-events:none;
}
.wave-main{display:flex;align-items:center;gap:40px;position:relative}
.wave-height-big{
  font-family:'Unbounded',sans-serif;
  font-size:clamp(60px,10vw,110px);font-weight:200;
  color:#fff;line-height:.9;letter-spacing:-4px;
  text-shadow:0 0 60px rgba(0,150,255,.4);
}
.wave-unit{
  font-family:'Unbounded',sans-serif;
  font-size:24px;font-weight:300;color:rgba(0,180,255,.7);
  align-self:flex-end;margin-bottom:8px;
}
.wave-meta{display:flex;flex-direction:column;gap:8px}
.wave-label{font-size:11px;letter-spacing:3px;text-transform:uppercase;color:rgba(0,180,255,.5)}
.wave-desc{font-size:22px;font-weight:500;color:#fff}

.marine-grid{
  display:grid;grid-template-columns:repeat(auto-fill,minmax(150px,1fr));gap:14px;margin-bottom:20px;
}
.marine-card{
  background:var(--glass);backdrop-filter:var(--blur);
  border:1px solid rgba(0,130,200,.15);border-radius:18px;
  padding:18px 20px;transition:all .3s ease;cursor:default;
}
.marine-card:hover{background:var(--glass-hover);border-color:rgba(0,150,255,.3);transform:translateY(-3px)}
.mc-icon{font-size:22px;margin-bottom:8px}
.mc-lbl{font-size:10px;color:rgba(0,180,255,.5);text-transform:uppercase;letter-spacing:1.5px;margin-bottom:5px}
.mc-val{font-size:17px;font-weight:600;color:var(--text)}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   LOADING STATE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.loading-scene{
  display:flex;flex-direction:column;align-items:center;
  justify-content:center;min-height:400px;gap:24px;
}
.loading-rings{position:relative;width:70px;height:70px}
.ring{
  position:absolute;inset:0;border-radius:50%;
  border:1.5px solid transparent;
}
.ring-1{border-top-color:var(--teal);animation:spin 1.2s linear infinite}
.ring-2{inset:10px;border-right-color:var(--violet);animation:spin 1.8s linear infinite reverse}
.ring-3{inset:20px;border-bottom-color:var(--emerald);animation:spin 2.4s linear infinite}
.ring-dot{position:absolute;inset:30px;border-radius:50%;background:var(--teal);opacity:.6;animation:pulse 1.2s ease-in-out infinite}
.loading-txt{
  font-size:13px;color:var(--text-3);letter-spacing:3px;
  text-transform:uppercase;font-weight:300;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   ERROR STATE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.error-scene{
  background:rgba(255,60,60,.06);
  backdrop-filter:var(--blur);
  border:1px solid rgba(255,80,80,.15);
  border-radius:24px;padding:56px;
  text-align:center;
  display:flex;flex-direction:column;align-items:center;gap:14px;
  animation:fadeUp .4s ease forwards;
}
.err-icon{font-size:48px;filter:drop-shadow(0 0 20px rgba(255,100,100,.4))}
.err-title{font-size:18px;font-weight:600;color:#ffb3b3}
.err-sub{font-size:13px;color:rgba(255,180,180,.5);line-height:1.8;max-width:400px}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   TOAST
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.toast{
  position:fixed;bottom:32px;left:50%;transform:translateX(-50%) translateY(20px);
  background:rgba(2,10,20,.95);
  backdrop-filter:blur(30px);-webkit-backdrop-filter:blur(30px);
  border:1px solid rgba(0,229,200,.3);
  border-radius:50px;padding:12px 28px;
  color:var(--text);font-size:13px;font-weight:400;
  z-index:1000;
  opacity:0;transition:all .35s cubic-bezier(.34,1.56,.64,1);
  white-space:nowrap;max-width:92vw;
  box-shadow:0 8px 40px rgba(0,0,0,.6),0 0 20px rgba(0,229,200,.1);
  pointer-events:none;
}
.toast.show{opacity:1;transform:translateX(-50%) translateY(0)}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   FOOTER
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.footer{
  text-align:center;margin-top:60px;
  color:var(--text-3);font-size:11px;letter-spacing:3px;font-weight:300;
  text-transform:uppercase;
}
.footer span{color:var(--teal);opacity:.6}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   RESPONSIVE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
@media(max-width:900px){
  .weather-hero{grid-template-columns:1fr}
  .hero-right{display:grid;grid-template-columns:1fr 1fr}
  .hist-top{grid-template-columns:1fr 1fr}
}
@media(max-width:640px){
  .header,.search-wrap,.content{padding-left:20px;padding-right:20px}
  .header{padding-top:28px}
  .hero-right{grid-template-columns:1fr}
  .nav-tabs{gap:4px;padding:4px}
  .nav-tab{padding:8px 14px;font-size:12px}
  .nav-tab .t-label{display:none}
  .brand-mark{font-size:24px}
  .hist-top{grid-template-columns:1fr}
  .temp-value{font-size:80px}
  .geo-pill .geo-lbl{display:none}
  .stat-strip{flex-wrap:wrap}
  .strip-item{min-width:33%}
}
</style>
</head>
<body>

<!-- Background -->
<div class="bg-canvas"></div>
<div class="aurora"></div>
<div class="orb orb-1"></div>
<div class="orb orb-2"></div>
<div class="orb orb-3"></div>
<div class="orb orb-4"></div>
<div class="grid-texture"></div>

<div id="toast" class="toast"></div>

<div class="page">

  <!-- â”€â”€ HEADER â”€â”€ -->
  <header class="header">
    <div class="brand">
      <div class="brand-mark">AETHER</div>
      <div class="brand-sub">Atmospheric Intelligence</div>
    </div>
    <nav class="nav-tabs">
      <button class="nav-tab on" id="tab-current" onclick="switchTab('current')">
        <span class="t-icon">â˜€ï¸</span><span class="t-label">Current</span>
      </button>
      <button class="nav-tab" id="tab-historical" onclick="switchTab('historical')">
        <span class="t-icon">ğŸ“…</span><span class="t-label">Historical</span>
      </button>
      <button class="nav-tab" id="tab-marine" onclick="switchTab('marine')">
        <span class="t-icon">ğŸŒŠ</span><span class="t-label">Marine</span>
      </button>
    </nav>
  </header>

  <!-- â”€â”€ SEARCH â”€â”€ -->
  <div class="search-wrap">
    <div class="search-pill">
      <span class="s-icon">ğŸ“</span>
      <input id="locIn" class="s-input" type="text" placeholder="Search any city, region or countryâ€¦" value="Mumbai"/>
      <input id="dateIn" class="date-pill" type="date"/>
      <button class="geo-pill" id="geoBtn" onclick="getLocation()">
        <span class="geo-i">ğŸ“¡</span>
        <span class="geo-lbl">My Location</span>
      </button>
      <button class="search-btn" onclick="doSearch()">Search</button>
    </div>
  </div>

  <!-- â”€â”€ CONTENT â”€â”€ -->
  <main class="content">
    <div id="content"></div>
  </main>

  <footer class="footer">
    Powered by <span>Weatherstack</span> Â· Glassmorphic UI Â· <span>Vercel</span>
  </footer>
</div>

<script>
/* â”€â”€ State â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
let activeTab = 'current';

const WC = {113:'â˜€ï¸',116:'â›…',119:'â˜ï¸',122:'ğŸŒ«ï¸',143:'ğŸŒ',176:'ğŸŒ¦ï¸',179:'ğŸŒ¨ï¸',182:'ğŸŒ§ï¸',200:'â›ˆï¸',227:'ğŸŒ¨ï¸',230:'â„ï¸',248:'ğŸŒ«ï¸',263:'ğŸŒ¦ï¸',266:'ğŸŒ¦ï¸',293:'ğŸŒ¦ï¸',296:'ğŸŒ¦ï¸',299:'ğŸŒ§ï¸',302:'ğŸŒ§ï¸',305:'ğŸŒ§ï¸',308:'ğŸŒ§ï¸',317:'ğŸŒ§ï¸',320:'ğŸŒ¨ï¸',329:'â„ï¸',332:'â„ï¸',335:'â„ï¸',338:'â„ï¸',353:'ğŸŒ¦ï¸',356:'ğŸŒ§ï¸',359:'ğŸŒ§ï¸',368:'ğŸŒ¨ï¸',371:'â„ï¸',386:'â›ˆï¸',389:'â›ˆï¸',395:'â„ï¸'};
const wi = c => WC[c]||'ğŸŒ¤ï¸';
const fmtH = t => String(Math.floor(t/100)).padStart(2,'0')+':00';
const esc = s => String(s||'').replace(/</g,'&lt;');

/* â”€â”€ Date setup â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
const yest = () => { const d=new Date(); d.setDate(d.getDate()-1); return d.toISOString().split('T')[0]; };
const dateEl = document.getElementById('dateIn');
dateEl.max = yest(); dateEl.value = yest();

/* â”€â”€ Toast â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
let toastTimer;
function toast(msg, dur=3500){
  const el=document.getElementById('toast');
  el.textContent=msg; el.classList.add('show');
  clearTimeout(toastTimer);
  toastTimer=setTimeout(()=>el.classList.remove('show'),dur);
}

/* â”€â”€ Tabs â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
function switchTab(t){
  activeTab=t;
  document.querySelectorAll('.nav-tab').forEach(b=>b.classList.remove('on'));
  document.getElementById('tab-'+t).classList.add('on');
  dateEl.style.display = t==='historical' ? 'block':'none';
  const loc=document.getElementById('locIn').value.trim();
  if(!loc) return;
  if(t==='current') fetchCurrent(loc);
  else if(t==='historical') fetchHistorical(loc, dateEl.value);
  else fetchMarine(loc);
}
document.getElementById('locIn').addEventListener('keydown',e=>{ if(e.key==='Enter') doSearch(); });

/* â”€â”€ Geolocation â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
function getLocation(){
  if(!navigator.geolocation){ toast('âŒ Geolocation not supported'); return; }
  const btn=document.getElementById('geoBtn');
  btn.disabled=true; btn.classList.add('spinning');
  toast('ğŸ“¡ Detecting your locationâ€¦',8000);
  navigator.geolocation.getCurrentPosition(
    async pos => {
      const {latitude:lat,longitude:lon}=pos.coords;
      try {
        const nom=await fetch(`https://nominatim.openstreetmap.org/reverse?lat=${lat}&lon=${lon}&format=json`).then(r=>r.json());
        const city=nom?.address?.city||nom?.address?.town||nom?.address?.village||`${lat.toFixed(3)},${lon.toFixed(3)}`;
        document.getElementById('locIn').value=city;
        btn.disabled=false; btn.classList.remove('spinning');
        toast(`âœ… ${city}`); doSearch();
    },
    err=>{
      btn.disabled=false; btn.classList.remove('spinning');
      toast({1:'âŒ Permission denied',2:'âŒ Location unavailable',3:'âŒ Timed out'}[err.code]||'âŒ Error');
    },
    {timeout:12000,maximumAge:60000}
  );
}

/* â”€â”€ Open-Meteo helpers â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
const GEO_URL = 'https://geocoding-api.open-meteo.com/v1/search';
const HIST_URL = 'https://archive-api.open-meteo.com/v1/archive';
const MARINE_URL = 'https://marine-api.open-meteo.com/v1/marine';

async function geocode(query){
  const r=await fetch(`${GEO_URL}?name=${encodeURIComponent(query)}&count=1&language=en&format=json`);
  const d=await r.json();
  if(!d.results?.length) throw new Error(`Location "${query}" not found`);
  return d.results[0];
}

const WMO={0:['Clear sky','â˜€ï¸'],1:['Mainly clear','ğŸŒ¤ï¸'],2:['Partly cloudy','â›…'],3:['Overcast','â˜ï¸'],45:['Foggy','ğŸŒ«ï¸'],48:['Icy fog','ğŸŒ«ï¸'],51:['Light drizzle','ğŸŒ¦ï¸'],53:['Drizzle','ğŸŒ¦ï¸'],55:['Heavy drizzle','ğŸŒ§ï¸'],61:['Light rain','ğŸŒ¦ï¸'],63:['Rain','ğŸŒ§ï¸'],65:['Heavy rain','ğŸŒ§ï¸'],71:['Light snow','ğŸŒ¨ï¸'],73:['Snow','â„ï¸'],75:['Heavy snow','â„ï¸'],80:['Showers','ğŸŒ¦ï¸'],81:['Showers','ğŸŒ§ï¸'],82:['Heavy showers','ğŸŒ§ï¸'],95:['Thunderstorm','â›ˆï¸'],96:['Thunderstorm','â›ˆï¸'],99:['Thunderstorm','â›ˆï¸']};
const wmo=c=>WMO[c]||['Unknown','ğŸŒ¡ï¸'];
const windDir=d=>['N','NE','E','SE','S','SW','W','NW'][Math.round(d/45)%8];

/* â”€â”€ Search â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
function doSearch(){
  const loc=document.getElementById('locIn').value.trim();
  if(!loc){ toast('Please enter a location'); return; }
  if(activeTab==='current') fetchCurrent(loc);
  else if(activeTab==='historical') fetchHistorical(loc, dateEl.value);
  else fetchMarine(loc);
}

/* â”€â”€ Current via Weatherstack proxy â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
async function fetchCurrent(query){
  showLoading();
  try {
    const url=`/api/weather?endpoint=current&query=${encodeURIComponent(query)}`;
    const res=await fetch(url);
    if(!res.ok) throw new Error(`Server error ${res.status}`);
    const data=await res.json();
    if(data.error) throw new Error(data.error.info||'API error '+data.error.code);
    renderCurrent(data);
  } catch(e){ showError(e.message); }
}

/* â”€â”€ Historical via Open-Meteo (free, no key) â”€â”€ */
async function fetchHistorical(query, date){
  showLoading();
  try {
    const loc=await geocode(query);
    const params=new URLSearchParams({
      latitude:loc.latitude, longitude:loc.longitude,
      start_date:date, end_date:date,
      hourly:'temperature_2m,relative_humidity_2m,precipitation,weather_code,wind_speed_10m,apparent_temperature',
      daily:'temperature_2m_max,temperature_2m_min,temperature_2m_mean,precipitation_sum,sunshine_duration,uv_index_max,wind_speed_10m_max',
      timezone:'auto'
    });
    const r=await fetch(`${HIST_URL}?${params}`);
    const data=await r.json();
    if(data.error) throw new Error(data.reason||'Historical data unavailable');
    renderHistoricalOM(data, loc, date);
  } catch(e){ showError(e.message); }
}

/* â”€â”€ Marine via Open-Meteo (free, no key) â”€â”€â”€â”€â”€â”€â”€ */
async function fetchMarine(query){
  showLoading();
  try {
    const loc=await geocode(query);
    const params=new URLSearchParams({
      latitude:loc.latitude, longitude:loc.longitude,
      current:'wave_height,wave_direction,wave_period,wind_wave_height,swell_wave_height,swell_wave_period,swell_wave_direction,ocean_current_velocity',
      hourly:'wave_height,wave_direction,wave_period,wind_wave_height,swell_wave_height,water_temperature',
      forecast_days:1, timezone:'auto'
    });
    const r=await fetch(`${MARINE_URL}?${params}`);
    const data=await r.json();
    if(data.error) throw new Error(data.reason||'Marine data unavailable for this location. Try a coastal city like Mumbai, Miami, or Sydney.');
    renderMarineOM(data, loc);
  } catch(e){ showError(e.message); }
}

/* â”€â”€ Loading â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
function showLoading(){
  document.getElementById('content').innerHTML=`
  <div class="loading-scene">
    <div class="loading-rings">
      <div class="ring ring-1"></div>
      <div class="ring ring-2"></div>
      <div class="ring ring-3"></div>
      <div class="ring-dot"></div>
    </div>
    <div class="loading-txt">Reading the atmosphereâ€¦</div>
  </div>`;
}

/* â”€â”€ Error â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
function showError(msg){
  document.getElementById('content').innerHTML=`
  <div class="error-scene">
    <div class="err-icon">âš¡</div>
    <div class="err-title">${esc(msg)}</div>
    <div class="err-sub">Try cities like <b>Tokyo</b>, <b>London</b>, <b>Dubai</b>, <b>New York</b>.<br>For Marine, use coastal cities like <b>Mumbai</b>, <b>Miami</b>, <b>Sydney</b>.</div>
  </div>`;
}

/* â”€â”€ Render Current â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
function renderCurrent(data){
  const {current:c,location:l}=data;
  const icon=wi(c.weather_code);
  const now=new Date();
  const hourly=c.hourly||[];

  document.getElementById('content').innerHTML=`
  <div class="weather-hero">

    <!-- LEFT: Big temperature panel -->
    <div class="hero-left">
      <div class="loc-live">
        <div class="live-chip"><div class="live-dot"></div>LIVE</div>
        <div class="loc-text">${esc(l.localtime)} &nbsp;Â·&nbsp; ${esc(l.timezone_id||'')}</div>
      </div>
      <div class="city-name">${esc(l.name)}</div>
      <div class="loc-meta">${esc(l.region?l.region+', ':'')}</div>
      <div class="temp-display">
        <div class="temp-value">${c.temperature}</div>
        <div class="temp-unit">Â°C</div>
      </div>
      <div class="weather-desc-row">
        <div class="weather-icon-big">${icon}</div>
        <div class="weather-desc">
          <div class="desc-main">${esc((c.weather_descriptions||[''])[0])}</div>
          <div class="desc-feels">Feels like ${c.feelslike}Â°C</div>
        </div>
      </div>
      <div class="stat-strip">
        <div class="strip-item">
          <div class="strip-icon">ğŸ’§</div>
          <div class="strip-label">Humidity</div>
          <div class="strip-val">${c.humidity}%</div>
        </div>
        <div class="strip-item">
          <div class="strip-icon">ğŸ’¨</div>
          <div class="strip-label">Wind</div>
          <div class="strip-val">${c.wind_speed} <span style="font-size:11px;opacity:.6">km/h</span></div>
        </div>
        <div class="strip-item">
          <div class="strip-icon">ğŸ‘ï¸</div>
          <div class="strip-label">Visibility</div>
          <div class="strip-val">${c.visibility} <span style="font-size:11px;opacity:.6">km</span></div>
        </div>
        <div class="strip-item">
          <div class="strip-icon">â˜ï¸</div>
          <div class="strip-label">Cloud</div>
          <div class="strip-val">${c.cloudcover}%</div>
        </div>
      </div>
    </div>

    <!-- RIGHT: detail cards -->
    <div class="hero-right">

      <div class="detail-card accent-teal">
        <div class="dc-title">âš¡ Atmosphere</div>
        <div class="dc-grid">
          <div class="dc-item"><div class="dc-icon">ğŸŒ¡ï¸</div><div class="dc-lbl">Pressure</div><div class="dc-val">${c.pressure} hPa</div></div>
          <div class="dc-item"><div class="dc-icon">ğŸŒ¬ï¸</div><div class="dc-lbl">UV Index</div><div class="dc-val">${c.uv_index}</div></div>
          <div class="dc-item"><div class="dc-icon">ğŸ§­</div><div class="dc-lbl">Wind Dir</div><div class="dc-val">${esc(c.wind_dir)}</div></div>
          <div class="dc-item"><div class="dc-icon">ğŸŒ§ï¸</div><div class="dc-lbl">Precip</div><div class="dc-val">${c.precip} mm</div></div>
        </div>
      </div>

      <div class="detail-card accent-violet">
        <div class="dc-title">ğŸŒ™ Astronomy</div>
        <div class="dc-grid">
          <div class="dc-item"><div class="dc-icon">ğŸŒ…</div><div class="dc-lbl">Sunrise</div><div class="dc-val">${esc(c.astro?.sunrise||'â€”')}</div></div>
          <div class="dc-item"><div class="dc-icon">ğŸŒ‡</div><div class="dc-lbl">Sunset</div><div class="dc-val">${esc(c.astro?.sunset||'â€”')}</div></div>
          <div class="dc-item"><div class="dc-icon">ğŸŒ™</div><div class="dc-lbl">Moon</div><div class="dc-val" style="font-size:12px">${esc(c.astro?.moon_phase||'â€”')}</div></div>
          <div class="dc-item"><div class="dc-icon">ğŸ’¡</div><div class="dc-lbl">Moonrise</div><div class="dc-val">${esc(c.astro?.moonrise||'â€”')}</div></div>
        </div>
      </div>

      <div class="detail-card">
        <div class="dc-title">ğŸ“ Location Info</div>
        <div class="dc-grid">
          <div class="dc-item"><div class="dc-icon">ğŸŒ</div><div class="dc-lbl">Country</div><div class="dc-val">${esc(l.country)}</div></div>
          <div class="dc-item"><div class="dc-icon">ğŸ™ï¸</div><div class="dc-lbl">Region</div><div class="dc-val" style="font-size:13px">${esc(l.region||'â€”')}</div></div>
          <div class="dc-item"><div class="dc-icon">ğŸ“¡</div><div class="dc-lbl">Latitude</div><div class="dc-val">${esc(l.lat)}</div></div>
          <div class="dc-item"><div class="dc-icon">ğŸ“¡</div><div class="dc-lbl">Longitude</div><div class="dc-val">${esc(l.lon)}</div></div>
        </div>
      </div>
    </div>
  </div>

  ${c.air_quality ? `
  <div class="aq-panel">
    <div class="section-label">ğŸŒ¿ Air Quality Index</div>
    <div class="aq-grid">
      ${Object.entries(c.air_quality).slice(0,6).map(([k,v])=>`
      <div class="aq-item">
        <div class="aq-icon">ğŸŒ¿</div>
        <div class="aq-lbl">${esc(k.replace(/_/g,' '))}</div>
        <div class="aq-val">${typeof v==='number'?v.toFixed(1):esc(v)}</div>
      </div>`).join('')}
    </div>
  </div>` : ''}
  `;
}

/* â”€â”€ Render Historical (Open-Meteo) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
function renderHistoricalOM(data, loc, date){
  const d=data.daily;
  const h=data.hourly;
  const sunHrs=d.sunshine_duration?.[0]?(d.sunshine_duration[0]/3600).toFixed(1):'â€”';
  const fmtTime=iso=>new Date(iso).toLocaleTimeString([],{hour:'2-digit',minute:'2-digit'});

  document.getElementById('content').innerHTML=`
  <div class="hist-hero">
    <div class="hist-top">
      <div class="hist-big-card">
        <div class="hist-icon">â„ï¸</div>
        <div class="hist-temp-val">${Math.round(d.temperature_2m_min[0])}Â°</div>
        <div class="hist-temp-label">Min Temperature</div>
      </div>
      <div class="hist-big-card highlight">
        <div class="hist-icon">ğŸŒ¡ï¸</div>
        <div class="hist-temp-val">${Math.round(d.temperature_2m_mean[0])}Â°</div>
        <div class="hist-temp-label">Average Temperature</div>
      </div>
      <div class="hist-big-card">
        <div class="hist-icon">ğŸ”¥</div>
        <div class="hist-temp-val">${Math.round(d.temperature_2m_max[0])}Â°</div>
        <div class="hist-temp-label">Max Temperature</div>
      </div>
    </div>

    <div style="margin-bottom:16px;font-size:14px;color:var(--text-2)">
      ğŸ“ <b>${esc(loc.name)}, ${esc(loc.country_code||'')}</b> &nbsp;Â·&nbsp; ${esc(date)}
    </div>

    <div class="hist-stats-row">
      ${[
        ['ğŸŒ§ï¸','Precipitation',d.precipitation_sum[0]+' mm'],
        ['â˜€ï¸','Sunshine',sunHrs+' hrs'],
        ['ğŸŒ¬ï¸','UV Index Max',d.uv_index_max?.[0]??'â€”'],
        ['ğŸ’¨','Max Wind',Math.round(d.wind_speed_10m_max[0])+' km/h'],
        ['ğŸ“','Latitude',loc.latitude.toFixed(4)],
        ['ğŸ“','Longitude',loc.longitude.toFixed(4)],
      ].map(([ico,lbl,val])=>`
      <div class="hist-stat">
        <div class="hs-icon">${ico}</div>
        <div class="hs-lbl">${lbl}</div>
        <div class="hs-val">${esc(String(val))}</div>
      </div>`).join('')}
    </div>

    ${h?.time?.length ? `
    <div class="hourly-section" style="opacity:1">
      <div class="section-label">Hourly Breakdown</div>
      <div class="hourly-track">
        ${h.time.map((t,i)=>{
          const [,ico]=wmo(h.weather_code[i]);
          return `<div class="h-card">
            <div class="h-time">${fmtTime(t)}</div>
            <div class="h-icon">${ico}</div>
            <div class="h-temp">${Math.round(h.temperature_2m[i])}Â°</div>
            <div class="h-rain">ğŸ’§ ${h.relative_humidity_2m[i]}%</div>
            <div class="h-wind">ğŸ’¨ ${Math.round(h.wind_speed_10m[i])}</div>
          </div>`;
        }).join('')}
      </div>
    </div>` : ''}
  </div>`;
}

/* â”€â”€ Render Marine (Open-Meteo) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
function renderMarineOM(data, loc){
  const c=data.current;
  const h=data.hourly;
  const now=new Date().toISOString().slice(0,13);
  const hi=h.time.findIndex(t=>t.startsWith(now));
  const slice=h.time.slice(Math.max(0,hi),Math.max(0,hi)+12);
  const fmtTime=iso=>new Date(iso).toLocaleTimeString([],{hour:'2-digit',minute:'2-digit'});

  document.getElementById('content').innerHTML=`
  <div class="marine-hero">
    <div class="wave-display">
      <div class="wave-bg"></div>
      <div style="margin-bottom:20px;font-size:12px;letter-spacing:3px;text-transform:uppercase;color:rgba(0,180,255,.5)">
        ğŸ“ ${esc(loc.name)}, ${esc(loc.country_code||'')} &nbsp;Â·&nbsp; Live Conditions
      </div>
      <div class="wave-main">
        <div style="display:flex;align-items:flex-start">
          <div class="wave-height-big">${c.wave_height??'â€”'}</div>
          <div class="wave-unit">m</div>
        </div>
        <div class="wave-meta">
          <div class="wave-label">Wave Height</div>
          <div class="wave-desc">ğŸŒŠ Period: ${c.wave_period??'â€”'}s</div>
          <div style="font-size:13px;color:rgba(0,180,255,.5);margin-top:4px">
            Dir: ${c.wave_direction??'â€”'}Â° ${windDir(c.wave_direction??0)} Â· Swell ${c.swell_wave_height??'â€”'}m
          </div>
        </div>
      </div>
    </div>

    <div class="marine-grid">
      ${[
        ['ğŸŒŠ','Wave Height',(c.wave_height??'â€”')+' m'],
        ['â±ï¸','Wave Period',(c.wave_period??'â€”')+' s'],
        ['ğŸ§­','Wave Dir',(c.wave_direction??'â€”')+'Â° '+windDir(c.wave_direction??0)],
        ['ğŸ’¨','Wind Wave',(c.wind_wave_height??'â€”')+' m'],
        ['ğŸ”„','Swell Height',(c.swell_wave_height??'â€”')+' m'],
        ['â³','Swell Period',(c.swell_wave_period??'â€”')+' s'],
        ['ğŸ§­','Swell Dir',(c.swell_wave_direction??'â€”')+'Â° '+windDir(c.swell_wave_direction??0)],
        ['ğŸŒ€','Ocean Current',c.ocean_current_velocity!=null?(c.ocean_current_velocity.toFixed(2)+' m/s'):'â€”'],
      ].map(([ico,lbl,val])=>`
      <div class="marine-card">
        <div class="mc-icon">${ico}</div>
        <div class="mc-lbl">${lbl}</div>
        <div class="mc-val">${val}</div>
      </div>`).join('')}
    </div>

    ${slice.length ? `
    <div class="hourly-section" style="opacity:1">
      <div class="section-label">Hourly Marine Forecast</div>
      <div class="hourly-track">
        ${slice.map(t=>{
          const i=h.time.indexOf(t);
          return `<div class="h-card">
            <div class="h-time">${fmtTime(t)}</div>
            <div class="h-icon">ğŸŒŠ</div>
            <div class="h-temp">${h.wave_height[i]}m</div>
            <div class="h-rain">â±ï¸ ${h.wave_period[i]}s</div>
            <div class="h-wind">ğŸŒ¡ï¸ ${h.water_temperature?.[i]??'â€”'}Â°</div>
          </div>`;
        }).join('')}
      </div>
    </div>` : ''}
  </div>`;
}

/* â”€â”€ Init â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
fetchCurrent('Mumbai');
</script>
</body>
</html>
